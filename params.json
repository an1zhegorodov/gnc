{
  "name": "GNC project review",
  "tagline": "",
  "body": "<a href=\"/review/rus.html\" title=\"Russian\">Russian</a> |\r\n<a href=\"/review/eng.html\" title=\"English\">English</a>\r\n## Architecture\r\n\r\n* CMSBundle:\r\n\t* Controller breakdown - [Good](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Controller/?at=master)\r\n\t* Views breakdown - [Good](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Resources/views/?at=master)\r\n\t* Business logic layer missing - [Bad](https://sites.google.com/site/dhntclub/thiet-ke-web-site/trao-doi/the-m-in-mvc-why-models-are-misunderstood-and-unappreciated)\r\n* ExchangerBundle:\r\n\t* Controller breakdown - [Good](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/ExchangerBundle/Controller/?at=master)\r\n\t* Views breakdown - [Good](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/ExchangerBundle/Resources/views/?at=master)\r\n\t* Reusable forms - [Good](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/ExchangerBundle/Form/Type/?at=master)\r\n\t* Business logic layer missing - [Bad](https://sites.google.com/site/dhntclub/thiet-ke-web-site/trao-doi/the-m-in-mvc-why-models-are-misunderstood-and-unappreciated)\r\n* MainBundle:\r\n\t* Controller breakdown - [Bad](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/MainBundle/Controller/?at=master)\r\n\t* Views breakdown - [Good](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/MainBundle/Resources/views/?at=master)\r\n\t* Business logic layer missing - [Bad](https://sites.google.com/site/dhntclub/thiet-ke-web-site/trao-doi/the-m-in-mvc-why-models-are-misunderstood-and-unappreciated)\r\n* UserBundle:\r\n\t* Controller breakdown - [Good](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/UserBundle/Controller/?at=master)\r\n\t* Views breakdown - [Good](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/UserBundle/Resources/views/?at=master)\r\n\t* Reusable forms - [Good](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/UserBundle/Form/Type/?at=master)\r\n\r\nSummary: Classic symfony2 namespacing convention is used, which helps to understand the structure of the project immediately. Functionality is splitted between 4 bundles, each responsible for a major application parts, helps for easy navigation. Looks like controllers contain business logic, which is bad for code reuse, testability and maintainability\r\n## Tests\r\n* Unit tests missing - Bad\r\n* Integration tests missing - Bad\r\n* UI tests missing - Bad\r\n\r\n## Code quality\r\n* ### [Static analysys](/gnc/review/report.html)\r\n* ### Backend\r\n\t* Using json files instead of a keyvalue/database storage - Bad [1](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/ExchangerBundle/Controller/RateController.php?at=master&fileviewer=file-view-default#RateController.php-38)\r\n\t* Routing configuration properly structured and commented - Good [1](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Resources/config/routing.yml?at=master&fileviewer=file-view-default) [2](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Resources/config/routing.yml?at=master&fileviewer=file-view-default) [3](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/MainBundle/Resources/config/routing.yml?at=master&fileviewer=file-view-default) [4](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/UserBundle/Resources/config/routing.yml?at=master&fileviewer=file-view-default)\r\n\t* No separation for admin and user routes - Bad [1](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Resources/config/routing.yml?at=master&fileviewer=file-view-default#routing.yml-41) [2](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Resources/config/routing.yml?at=master&fileviewer=file-view-default#routing.yml-21)\r\n  * Fat controllers, not models - [Really bad](https://sites.google.com/site/dhntclub/thiet-ke-web-site/trao-doi/the-m-in-mvc-why-models-are-misunderstood-and-unappreciate)\r\n  * Inconsistent spacing and formatting - Really bad\r\n  * Non-descriptive naming - Bad [1](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/UserBundle/Controller/DefaultController.php?at=master&fileviewer=file-view-default#DefaultController.php-11) [2](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/MainBundle/Controller/DefaultController.php?at=master&fileviewer=file-view-default)\r\n  * Configuration in properties - [Bad](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Controller/BlogController.php?at=master&fileviewer=file-view-default#BlogController.php-12)\r\n  * Pagination logic is duplicated in all controller methods - Really bad [1](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Controller/BlogController.php?at=master&fileviewer=file-view-default#BlogController.php-128) [2](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Controller/BlogController.php?at=master&fileviewer=file-view-default#BlogController.php-35) [3](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Controller/BlogController.php?at=master&fileviewer=file-view-default#BlogController.php-162) [4](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Controller/CommentController.php?at=master&fileviewer=file-view-default#CommentController.php-470)\r\n  * Repositories are accessed through EntityManager - Bad [1](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Controller/CommentController.php?at=master&fileviewer=file-view-default#CommentController.php-466) [1](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Controller/PageController.php?at=master&fileviewer=file-view-default#PageController.php-76) [2](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Controller/PageController.php?at=master&fileviewer=file-view-default#PageController.php-66) [3](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Controller/WikiPageController.php?at=master&fileviewer=file-view-default#WikiPageController.php-40)\r\n  * Forms defined in controller action - Bad [1](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Controller/WikiPageController.php?at=master&fileviewer=file-view-default#WikiPageController.php-126) [2](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/CmsBundle/Controller/FaqController.php?at=master&fileviewer=file-view-default#FaqController.php-44) [3](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/ExchangerBundle/Controller/ExchangerAdminController.php?at=master&fileviewer=file-view-default#ExchangerAdminController.php-70) [4](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/ExchangerBundle/Controller/RatingController.php?at=master&fileviewer=file-view-default#RatingController.php-19)\r\n* ### Front end\r\n\t* Clean and tidy html.twig templates - Good\r\n\t* Using CSS selectors for javascript behaviour - Bad [1](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/MainBundle/Resources/public/js/apps-onepage.js?at=master&fileviewer=file-view-default) [2](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/MainBundle/Resources/public/js/apps.js?at=master&fileviewer=file-view-default)\r\n\t* Duplication - Bad [1](https://bitbucket.org/anizhegorodov/gnc/src/076ae3359be79aaeb2c58ff4fe234901d13b02f1/src/goChange/MainBundle/Resources/public/js/apps-onepage.js?at=master&fileviewer=file-view-default)\r\n\r\n* ## Recommendations\r\n\t* Improvements priority\r\n\t\t* Pick coding standard and reformat code according to it\r\n\t\t* Move database operations to repositories\r\n\t\t* Move form definitions into separate classes\r\n\t\t* Make controllers thin by providing the business logic it's own place\r\n\t\t* Put rates into keyvalue/database storage for faster reads\r\n\t\t* Refactor jquery spagetti\r\n\t\r\n\t```javascript\r\n    // Before\r\n\t$(\"#btn-toggle-nav\").click(function(){\r\n\t\t\"use strict\";\r\n\t\t$(\".menus\").toggleClass(\"toggle-nav\");\r\n\t});\r\n\r\n\t$(\"#nav-icon-search\").click(function(){\r\n\t\t\"use strict\";\r\n\t\t$(\"#search-sub\").toggleClass(\"visible\");\r\n\t});\r\n\t$(\"#nav-icon-phone\").click(function(){\r\n\t\t\"use strict\";\r\n\t\t$(\"#phone-sub\").toggleClass(\"visible\");\r\n\t});\r\n\r\n\t$(\"#btn-icon-search\").click(function(){\r\n\t\t\"use strict\";\r\n\t\t$(\"#search-sub\").toggleClass(\"visible\");\r\n\t});\r\n\t$(\"#btn-icon-phone\").click(function(){\r\n\t\t\"use strict\";\r\n\t\t$(\"#phone-sub\").toggleClass(\"visible\");\r\n\t});\r\n    ```\r\n    \r\n    ```javascript\r\n    // After\r\n    $(document).on('click', '.js-class-toggle', function() {\r\n    \tvar $this = $(this);\r\n        var classToToggle = $this.data('toggle-class');\r\n        var targetSelector = $this.data('toggle-target');\r\n        $(targetSelector).each(function(index, element) {\r\n        \t$(element).toggleClass(classToToggle);\r\n        });\r\n    });\r\n    ```\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}